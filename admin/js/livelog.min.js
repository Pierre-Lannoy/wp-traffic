jQuery(document).ready(function(e){function b(){e("#traffic-select-bound").change(function(){bound=e(this).val()});e("#traffic-control-play").click(function(){a()});e("#traffic-control-pause").click(function(){f()})}function a(){document.querySelector("#traffic-control-pause").classList.remove("traffic-control-inactive");document.querySelector("#traffic-control-pause").classList.add("traffic-control-active");document.querySelector("#traffic-control-play").classList.remove("traffic-control-active");document.querySelector("#traffic-control-play").classList.add("traffic-control-inactive");document.querySelector(".traffic-control-hint").innerHTML="running&nbsp;&nbsp;&nbsp;ðŸŸ¢";running=true}function f(){document.querySelector("#traffic-control-play").classList.remove("traffic-control-inactive");document.querySelector("#traffic-control-play").classList.add("traffic-control-active");document.querySelector("#traffic-control-pause").classList.remove("traffic-control-active");document.querySelector("#traffic-control-pause").classList.add("traffic-control-inactive");document.querySelector(".traffic-control-hint").innerHTML="paused&nbsp;&nbsp;&nbsp;ðŸŸ ";running=false}function d(){if(running){if("0"===index){elem=document.createElement("pre");elem.classList.add("traffic-logger-line");elem.classList.add("traffic-logger-line-init");elem.innerHTML="Waiting first API call...";c.appendChild(elem);init=true}e.ajax({type:"GET",url:livelog.restUrl,data:{direction:bound,index:index},beforeSend:function(g){g.setRequestHeader("X-WP-Nonce",livelog.restNonce);g.setRequestHeader("Traffic-No-Log","inbound")},success:function(g){if(g){if(undefined!==g.index){index=g.index}if(undefined!==g.items){items=Object.entries(g.items);if(items.length>0){if(init){c.removeChild(c.firstElementChild);init=false;a()}items.forEach(function(h){elem=document.createElement("pre");elem.classList.add("traffic-logger-line");elem.classList.add("traffic-logger-line-"+h[1].bound);elem.innerHTML=h[1].line.replace(" ","&nbsp;");if(c.childElementCount>livelog.buffer){c.removeChild(c.firstElementChild)}c.appendChild(elem);e("#traffic-logger-lines").animate({scrollTop:elem.offsetTop},20)})}}}},complete:function(g){setTimeout(d,livelog.frequency)}})}else{setTimeout(d,250)}}let bound="both";let index="0";let running=true;let init=false;const c=document.querySelector("#traffic-logger-lines");b();d()});